<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - IDRC Sample Tracking</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Prismproject_A.styles.css" asp-append-version="true" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">


    <!-- Include jQuery library -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    @using Microsoft.AspNetCore.Identity
    @inject SignInManager<ApplicationUser> SignInManager
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.0/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.0.6/dist/cdn.min.js" defer></script>
</head>

<body>
   
@*         <nav class="sticky top-0 px-3 pb-0 bg-white border-bottom box-shadow mb-0">
        <div class="container mx-auto px-4 py-2">
            <div class="flex justify-between items-center">
                    <!-- Use w-100 to ensure the row takes up full width -->
                    
                        <!-- Align items vertically in the middle -->
                        <a class="flex items-center" asp-area="" asp-controller="Home" asp-action="Index">
                            <img src="~/lib/logo.png" class="logo_img" />
                        </a>


                <div class="flex items-center space-x-4">

                    <a class="nav-link text-blue-800 text-xl" asp-area="" asp-controller="Home" asp-action="Index"><b>Home</b></a>
                    <a class="nav-link text-dark text-xl" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                        <partial name="_LoginPartial" /> <!-- Place the login partial here -->
                    </div>
                </div>
            </div>
        </nav> *@
    <nav class="sticky top-0 px-3 py-2 bg-white border-b shadow-md mb-0">
        <div class="container mx-auto px-4 py-2">
            <div class="flex justify-between items-center">
                <!-- Logo Section -->
                <a href="#" class="flex items-center space-x-2 p-2 rounded-lg  hover:bg-gray-200 transition-all duration-300 ease-in-out  hover:shadow-lg transform hover:scale-105">
                    <i class="bi bi-database-check text-3xl transition-transform duration-300 ease-in-out hover:scale-110"></i>
                    <h1 class="text-2xl font-bold text-gray-800 hover:text-blue-800 transition-all duration-300 ease-in-out">IDRC Tracking Database</h1>
                </a>


                <!-- Navbar Links and Dropdown -->
                <div class="relative flex items-center space-x-4">
                    <a class="nav-link text-blue-800 text-xl" asp-area="" asp-controller="Home" asp-action="Index"><b>Home</b></a>
                    <a class="nav-link text-gray-800 text-xl" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>

                    <div class="relative">
                        <button id="dropdownButton" class="flex items-center text-gray-800 text-xl focus:outline-none nav-link">
                            <span>Studies</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 ml-1" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 9.586l3.293-2.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <div id="dropdownMenu" class="dropdown-menu absolute right-0 mt-2 w-48 bg-white border border-gray-300 rounded-lg shadow-lg">
                            <a href="BoxSubs/Index" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Prism</a>
                            <a href="/ImmerseSamples/Index" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Immerse</a>
                            <a href="ZumbaSamples/Index" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Zumba</a>
                        </div>
                    </div>

                   <!-- Login Partial -->
                    <partial name="_LoginPartial" />
                </div>
            </div>
        </div>
    </nav>

    
    <div class="container bg-gray-50 px-0">
        <main role="main" class="pb-1 pl-0 ">
            <div class="flex h-50 @(SignInManager.IsSignedIn(User) ? "" : "items-center justify-center")">
            @if (SignInManager.IsSignedIn(User)){
                @* My side bar begin here *@
                    <button id="sidebarToggle" class=" px-1 py-1  bg-gray-200 grd hover:bg-gray-300 sidebutton">
                        <svg id="toggleIcon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 rotate-90" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path  stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                <div id="sidebar" class="w-64 bg-gray-50 shadow-xl flex-shrink-0 rounded-r-xl">
                        <div class="flex items-center  p-4 rounded-r-xl bg-gray-200 grd">
                            <i class="fas fa-tachometer-alt text-gray-900 mr-1 "></i>
                            <h2 class="text-xl font-semibold text-gray-800 hover:bg-blue-800">Dashboard</h2>
                        </div>

                    <nav class="mt-6">
                            <div class="relative mt-2 border-b border-black my-1 mx-4 flex items-center justify-center">
                                <i class="bi bi-book-half mr-2 text-xl"></i>
                                <h1 class="text-xl font-bold">STUDIES</h1>
                            </div>


                            
                        <div class="relative">
                            <button id="part1Btn" class="w-full py-2 px-2 text-lg text-left text-gray-700 hover:bg-gray-200 focus:outline-none relative">
                                    <i class="bi bi-pen-fill"></i> 
                                    <a href="/BoxSubs/Index" style="color: black;"> <b>Prism</b> </a>

                                <svg id="part1Arrow" class="absolute right-4 top-1/2 transform -translate-y-1/2 transition-transform duration-300 pointer-events-none" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 15l6-6H4l6 6z"></path>
                                </svg>
                            </button>
                            <div id="part1Dropdown" class="hidden absolute mt-1 w-full bg-white rounded-xl shadow-lg z-10">
                                <a href="/BoxSubs/Index" class="block py-2 px-4 text-gray-700 hover:bg-gray-200">View samples</a>
                                <a href="/BoxSubs/Create" class="block py-2 px-4 text-gray-700 hover:bg-gray-200">Add sample</a>
                                @* <a href="/FreezerDetails/Index" class="block py-2 px-4 text-gray-700 hover:bg-gray-200">Freezer details</a> *@
                                @* <a href="/BoxLocations/Index" class="block py-2 px-4 text-gray-700 hover:bg-gray-200">Box locations</a> *@
                            </div>
                        </div>
                        <div class="relative mt-2">
                            <button id="part2Btn" class="w-full py-2 px-2 text-lg text-left text-gray-700 hover:bg-gray-300 focus:outline-none relative">
                                    <i class="bi bi-pen"></i>
                                    <a href="/ImmerseSamples/Index" style="color: black;"><b>Immerse</b></a>
                                <svg id="part2Arrow" class="absolute right-4 top-1/2 transform -translate-y-1/2 transition-transform duration-300 pointer-events-none" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 15l6-6H4l6 6z"></path>
                                </svg>
                            </button>
                            <div id="part2Dropdown" class="hidden absolute mt-1 w-full bg-white rounded-xl shadow-lg z-10">
                                <a href="/ImmerseSamples/Index" class="block py-2 px-4 text-gray-700 hover:bg-gray-200">View samples</a>
                                <a href="/ImmerseSamples/Create" class="block py-2 px-4 text-gray-700 hover:bg-gray-200">Add samples</a>
                            </div>
                        </div>
                        <div class="relative mt-2">
                            <button id="part3Btn" class="w-full py-2 px-2 text-lg text-left text-gray-700 hover:bg-gray-200 focus:outline-none relative">
                                    <i class="bi bi-pen-fill"></i>
                                    <a href="/ZumbaSamples/Index" style="color: black;"><b>Zumba</b></a>
                                <svg id="part3Arrow" class="absolute right-4 top-1/2 transform -translate-y-1/2 transition-transform duration-300 pointer-events-none" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 15l6-6H4l6 6z"></path>
                                </svg>
                            </button>
                            <div id="part3Dropdown" class="hidden absolute mt-1 w-full bg-white rounded-xl shadow-lg z-10">
                                <a href="/ZumbaSamples/Index" class="block py-2 px-4 text-gray-700 hover:bg-gray-200">View sample</a>
                                <a href="ZumbaSamples/Create" class="block py-2 px-4 text-gray-700 hover:bg-gray-200">Add sample</a>
                                </div>
                        </div>
                        <div class="relative mt-2">
                            <button id="part1Btn" class="w-full py-2 px-2 text-lg text-left text-gray-700 hover:bg-gray-200 focus:outline-none relative">
                                    <i class="bi bi-pen"></i>
                                    <a href="#" style="color: black;"><b>TES</b></a>
                                <svg id="part1Arrow" class="absolute right-4 top-1/2 transform -translate-y-1/2 transition-transform duration-300 pointer-events-none" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 15l6-6H4l6 6z"></path>
                                </svg>
                            </button>
                            <div id="part1Dropdown" class="hidden absolute mt-1 w-full bg-white rounded-xl shadow-lg z-10">
                                <a href="#" class="block py-2 px-4 text-gray-700 hover:bg-gray-200">Add sample</a>
                            </div>
                        </div>
                            <div class="relative mt-2 border-b border-black my-1 mx-4 flex items-center justify-center">
                                <i class="bi bi-bar-chart-line-fill mr-2 text-xl"></i>
                                <h1 class="text-xl font-bold">MORE</h1>
                            </div>
                        <div class="relative mt-2">
                                <button id="" class="w-full py-2 px-4 text-lg text-left text-gray-700 hover:bg-gray-200 focus:outline-none relative">
                                    <a href="/SpecimenTypes/Index" style="color: black;"><b>Specimen Types</b></a>
                                </button>
                        </div>
                        <div class="relative mt-2">
                                <button id="" class="w-full py-2 px-4 text-lg text-left text-gray-700 hover:bg-gray-200 focus:outline-none relative">
                                    <a href="/FreezerDetails/Index" style="color: black;"><b>Freezer Details</b></a>
                                </button>
                         </div>
                        <div class="relative mt-2">
                                <button id="" class="w-full py-2 px-4 text-lg text-left text-gray-700 hover:bg-gray-200 focus:outline-none relative">
                                    <a href="/MRCmappings/Index" style="color: black;"><b>MRC mappings</b></a>
                                </button>
                         </div>
                         <div class="relative mt-2">
                                <button id="" class="w-full py-2 px-4 text-lg text-left text-gray-700 hover:bg-gray-200 focus:outline-none relative">
                                    <a href="/Locations/Index" style="color: black;"><b>Locations</b></a>
                                </button>
                         </div>
                    </nav>
                    </div>
                    @* And I think end*@
                }
                else
                {

                }
                @RenderBody() <!-- Render your main content here -->
            </div>
        </main>
        <!-- Back to Top Button -->
        <button id="backToTopBtn" class="back-to-top-btn">↑ Back to Top</button>
    </div>
    <footer class="border-top footer1 text-muted row justify-content-between border-top">
        <div class="col-md-6 mt-5"><h2 class="foot">&copy; 2024 - Prism tracking database </h2></div>

        <div class="col-md-4 mt-5"><img src="~/lib/idrclogo.png" class="idrc_img" /></div>


    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>

<script>
    $(document).ready(function () {
        // Toggle between Part 1 and Part 2
        $('#part1Btn').click(function () {
            $('#part1').removeClass('hidden');
            $('#part2').addClass('hidden');
            $(this).addClass('bg-gray-200');
            $('#part2Btn').removeClass('bg-gray-200');
        });

        // $('#part2Btn').click(function () {
        //     $('#part2').removeClass('hidden');
        //     $('#part1').addClass('hidden');
        //     $(this).addClass('bg-gray-200');
        //     $('#part1Btn').removeClass('bg-gray-200');
        // });

        // Search functionality (Part 1)
        $('#searchPart1').keyup(function () {
            var searchText = $(this).val().toLowerCase();
            $('.part-container#part1 tbody tr').each(function () {
                var found = false;
                $(this).find('td').each(function () {
                    if ($(this).text().toLowerCase().indexOf(searchText) !== -1) {
                        found = true;
                        return false; // break the loop
                    }
                });
                found ? $(this).show() : $(this).hide();
            });
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        const part1Btn = document.getElementById('part1Btn');
        const part1Dropdown = document.getElementById('part1Dropdown');
        const part1Arrow = document.getElementById('part1Arrow');

        const part2Btn = document.getElementById('part2Btn');
        const part2Dropdown = document.getElementById('part2Dropdown');
        const part2Arrow = document.getElementById('part2Arrow');

        const part3Btn = document.getElementById('part3Btn');
        const part3Dropdown = document.getElementById('part3Dropdown');
        const part3Arrow = document.getElementById('part3Arrow');

        part1Btn.addEventListener('click', function () {
            part1Dropdown.classList.toggle('hidden');
            part1Arrow.classList.toggle('rotate-90');
        });

        part2Btn.addEventListener('click', function () {
            part2Dropdown.classList.toggle('hidden');
            part2Arrow.classList.toggle('rotate-90');
        });
        part3Btn.addEventListener('click', function () {
            part3Dropdown.classList.toggle('hidden');
            part3Arrow.classList.toggle('rotate-90');
        });
        // Close dropdowns when clicking outside
        document.addEventListener('click', function (event) {
            if (!part1Btn.contains(event.target)) {
                part1Dropdown.classList.add('hidden');
                part1Arrow.classList.remove('rotate-90');
            }
            if (!part2Btn.contains(event.target)) {
                part2Dropdown.classList.add('hidden');
                part2Arrow.classList.remove('rotate-90');
            }
            if (!part3Btn.contains(event.target)) {
                part3Dropdown.classList.add('hidden');
                part3Arrow.classList.remove('rotate-90');
            }
        });

        $(document).ready(function () {
            // Function to toggle sidebar visibility
            $('#sidebarToggle').click(function () {
                $('#sidebar').toggleClass('hidden block'); // Toggle visibility
                $('#mainContent').toggleClass('flex-1'); // Adjust main content width
                $('#toggleIcon').toggleClass('rotate-90');
            });
        });
    });

    // Show "Back to Top" button
    var btn = $('#backToTopBtn');
    $(window).scroll(function () {
        if ($(window).scrollTop() > 200) {
            btn.addClass('flex');
            btn.removeClass('hidden');
        } else {
            btn.addClass('hidden');
            btn.removeClass('flex');
        }
    });

    btn.on('click', function (e) {
        e.preventDefault();
        $('html, body').animate({ scrollTop: 0 }, '200');
    });

    document.addEventListener('DOMContentLoaded', () => {
        const dropdownButton = document.getElementById('dropdownButton');
        const dropdownMenu = document.getElementById('dropdownMenu');

        dropdownButton.addEventListener('click', () => {
            dropdownMenu.classList.toggle('show');
        });

        document.addEventListener('click', (event) => {
            if (!dropdownButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
                dropdownMenu.classList.remove('show');
            }
        });
    });
    </script>

